
---
categories: äººå·¥æ™ºèƒ½
cover: https://cdn-images-1.readmedium.com/v2/resize:fit:800/0*z0NGOqzhh3YDrHma.jpg
date: '2024-06-20 03:09:46'
tags:
  - LangGraph
  - LangSmith
  - å¤šä»£ç†ç³»ç»Ÿ
title: å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ/ LangGraph

---
æ˜¯çš„ï¼Œä½ æ²¡å¬é”™ï¼ŒSmithsæ¥äº†ï¼è·ç¦»æˆ‘ä¸Šä¸€ä¸ªå¸–å­å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ã€‚å¦‚æœä½ æ˜¯æ–°æ¥çš„ï¼Œå—¨ã€‚æˆ‘æƒ³åœ¨è¿™ç¯‡æ–‡ç« ä¸­è°ˆè°ˆ [LangGraph](https://langchain-ai.github.io/langgraph/) ä»¥åŠä¸€ç‚¹å…³äº [LangSmith](https://www.langchain.com/langsmith) çš„å†…å®¹ã€‚æœ€è¿‘ï¼Œæˆ‘ä»¬å¼€å§‹å®ç° [Agent Supervisor](https://langchain-ai.github.io/langgraph/tutorials/multi_agent/agent_supervisor/)ï¼›è¿™æ˜¯ä¸€ç§å®ç°å¤šä»£ç†ç³»ç»Ÿçš„_æ–¹å¼_ã€‚

ä½†åœ¨æˆ‘ä»¬æ·±å…¥æŠ€æœ¯ä¹‹å‰ï¼Œæˆ‘ä»¬èƒ½ç­‰ä¸€ä¸‹å—ï¼Ÿè¿™æ˜¯æ¥è‡ªã€Šé»‘å®¢å¸å›½ã€‹çš„ [Agent Smith](https://en.wikipedia.org/wiki/Agent_Smith)ã€‚è®°å¾—ä»–ä»¬æ˜¯çŸ©é˜µåˆ›é€ çš„ä¸€æ®µä»£ç ï¼Œç”¨æ¥ä¿æŒç³»ç»Ÿä¸­çš„â€œç§©åºâ€ï¼Œè¿™ä¸ªç³»ç»Ÿè®©äººç±»å¤„äºæ¨¡æ‹Ÿä¸­ã€‚ï¼ˆ_å³ä½¿ç³»ç»Ÿå´©æºƒäº†ï¼Œå‘Neoè‡´æ•¬_ï¼‰ã€‚Smithså¤„äºä¸€ä¸ªç­‰çº§ä½“ç³»ä¸­ï¼›æœ‰â€œSmithâ€å‘½ä»¤å…¶ä»–Smithå»åšäº‹æƒ…ã€‚ï¼ˆ_ä»–åæ¥å¯ä»¥åœ¨æ¨¡æ‹Ÿä¸­å¤åˆ¶è‡ªå·±çš„å­˜åœ¨ã€‚å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ç§å¤„ç†æœ‰è®¸å¤šè¯·æ±‚çš„ç³»ç»Ÿçš„éå¸¸é…·çš„æ–¹å¼ï¼Œä¹Ÿè®¸æ˜¯LangChainçš„ä¸‹ä¸€ä¸ªåŠ¨ä½œï¼›_ï¼‰



ç»è¿‡æˆ‘çš„ç©ç¬‘æ—¶é—´ï¼ŒLangGraphæ˜¯ä¸€ä¸ªéå¸¸é…·çš„åº“ï¼›åœ¨LangChainæ— æ³•å¤„ç†çš„æƒ…å†µä¸‹ï¼Œå®ƒéå¸¸æœ‰ç”¨ã€‚å®ƒæä¾›äº†è§£å†³å¤æ‚é—®é¢˜ã€ç”¨ä¾‹æˆ–æµç¨‹çš„æ–¹æ¡ˆï¼Œå½“éœ€è¦æ—¶ï¼Œä¸€ä¸ªä»£ç†ç³»ç»Ÿå¹¶ä¸å¤Ÿå¥½ã€‚æ­£å¦‚æˆ‘ä¹‹å‰æ‰€è¯´ï¼Œæˆ‘å°†è®¨è®º [Multi-Agent Systems](https://langchain-ai.github.io/langgraph/tutorials/#multi-agent-systems)ï¼Œä¸»è¦æ˜¯ [Supervisor](https://langchain-ai.github.io/langgraph/tutorials/multi_agent/agent_supervisor/) çš„å®ç°ï¼Œå› ä¸ºæœ‰ä¸åŒçš„æ–¹æ³•å¯ä»¥ç»„åˆè¿™äº›ä»£ç†ã€‚ç”±äºæˆ‘ä»¬æ­£åœ¨å°è¯•å®ç°ä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œæˆ‘ä»¬ä» [Customer Support Bot](https://langchain-ai.github.io/langgraph/tutorials/customer-support/customer-support/) æ•™ç¨‹ä¸­è·å¾—äº†å¾ˆå¤šå¸®åŠ©ã€‚å®ƒæ¸…æ™°åœ°å±•ç¤ºäº†ä½ å¯ä»¥åœ¨èŠå¤©ä¸­åšä»€ä¹ˆï¼Œä»¥åŠå¦‚ä½•æ§åˆ¶ä½ çš„ä»£ç†å»åšæ­£ç¡®çš„äº‹æƒ…ã€‚

## LangGraph ä»‹ç»

LangGraph å»ºç«‹åœ¨ LangChain ä¹‹ä¸Šï¼Œå®Œå…¨å…¼å®¹ LangChain ç”Ÿæ€ç³»ç»Ÿã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºå¤æ‚ã€å¯æ‰©å±• AI ä»£ç†çš„ Python åº“ï¼Œé‡‡ç”¨åŸºäºå›¾çš„çŠ¶æ€æœºã€‚å¦‚æœæ‚¨æ›¾ç»å°è¯•è¿‡ LangChainï¼Œæ‚¨åº”è¯¥ä¼šå‘ç°å½“æ‚¨å¸Œæœ›ä»£ç†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œæ—¶ï¼Œå®ƒçš„ä¸è¶³ä¹‹å¤„ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œé€šå¸¸éœ€è¦æ›´å¤šçš„æ§åˆ¶ã€‚æ‚¨å¯èƒ½å¸Œæœ›å§‹ç»ˆå¼ºåˆ¶ä»£ç†é¦–å…ˆè°ƒç”¨ç‰¹å®šå·¥å…·ã€‚æ‚¨å¯èƒ½å¸Œæœ›å¯¹å·¥å…·çš„è°ƒç”¨æ–¹å¼æœ‰æ›´å¤šæ§åˆ¶ã€‚æ‚¨å¯èƒ½å¸Œæœ›æ ¹æ®ä»£ç†æ‰€å¤„çš„çŠ¶æ€æ‹¥æœ‰ä¸åŒçš„æç¤ºã€‚

é‚£ä¹ˆï¼Œè¿™äº›â€œçŠ¶æ€æœºâ€æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒä»¬èµ‹äºˆæ‚¨é€šè¿‡ä¸ LLM çš„äººæœºäº¤äº’å¾ªç¯å·¥ä½œçš„èƒ½åŠ›ã€‚å®ƒè·Ÿè¸ªå“ªä¸ªä»£ç†åœ¨è¿è¡Œï¼Œä½¿ç”¨äº†å“ªä¸ªå·¥å…·ï¼Œå¦‚æœæ‚¨å¸Œæœ›ï¼Œä¹Ÿå¯ä»¥æœ‰è®°å¿†ã€‚æˆ‘ç°åœ¨ä¸æƒ³æ·±å…¥è®¨è®ºè®°å¿†ï¼Œä½†å®ƒä¸æˆ‘ä»¬åœ¨ LangChain ä¸­çœ‹åˆ°çš„æœ‰æ‰€ä¸åŒã€‚æ£€æŸ¥ç‚¹é€šè¿‡æŒä¹…åŒ–å…¶çŠ¶æ€ä¸ºæ‚¨çš„ä»£ç†æä¾›â€œè®°å¿†â€ã€‚

## StateGraph

`StateGraph` æ˜¯ä¸€ä¸ªè¡¨ç¤ºå›¾çš„ç±»ã€‚é€šè¿‡ä¼ é€’ `state` å®šä¹‰æ¥åˆå§‹åŒ–æ­¤ç±»ã€‚è¯¥çŠ¶æ€ç”±å›¾ä¸­çš„èŠ‚ç‚¹æ›´æ–°ï¼Œè¿™äº›èŠ‚ç‚¹ä»¥é”®å€¼å­˜å‚¨çš„å½¢å¼è¿”å›æ“ä½œã€‚

```
from langgraph.graph import StateGraph
from typing import TypedDict, List, Annotated
import Operator
from langchain_core.messages import BaseMessage

class State(TypedDict):
    input: str
    messages: Annotated[Sequence[BaseMessage], operator.add]

graph = StateGraph(State)
```

## èŠ‚ç‚¹

åˆ›å»º `StateGraph` åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `graph.add_node(name, value)` è¯­æ³•æ·»åŠ èŠ‚ç‚¹ã€‚`value` å‚æ•°åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–å¯è¿è¡Œçš„ LCELï¼Œå°†è¢«è°ƒç”¨ï¼ˆå³å¯æ‰§è¡Œå·¥å…·æˆ– LLMï¼‰

```
graph.add_node("model", model)
graph.add_node("tools", tool_executor)
```

è¯·è®°ä½ï¼Œæˆ‘ä»¬å°†å¾ªç¯éå†è¿™ä¸ªå›¾ï¼Œå› æ­¤åœ¨è¿‡ç¨‹ä¸­é€€å‡ºæŸä¸ªåœ°æ–¹æ˜¯å¾ˆé‡è¦çš„ã€‚`END` èŠ‚ç‚¹ç”¨äºè¡¨ç¤ºå›¾çš„ç»“æŸã€‚

```
from langgraph.graph import END

graph.add_node("end", END)
```

## è¾¹

æ·»åŠ èŠ‚ç‚¹åï¼Œæ‚¨å¯ä»¥æ·»åŠ è¾¹ä»¥åˆ›å»ºå›¾ã€‚ç°åœ¨æœ‰ä¸‰ç§ç±»å‹çš„è¾¹ï¼š

**1 - èµ·å§‹è¾¹ :** è¿™æ˜¯è¿æ¥å›¾çš„èµ·ç‚¹å’Œç‰¹å®šèŠ‚ç‚¹çš„è¾¹ã€‚ä¸‹é¢çš„ä»£ç æ„å‘³ç€æˆ‘ä»¬çš„å›¾å°†ä»â€œmodelâ€èŠ‚ç‚¹å¼€å§‹ï¼Œæ­£å¦‚æˆ‘ä»¬ä¹‹å‰å‘½åçš„é‚£æ ·ã€‚

```
graph.set_entry_point("model")
```

**2 - æ™®é€šè¾¹ :** è¿™äº›è¾¹ç¡®ä¿ä¸€ä¸ªèŠ‚ç‚¹æ€»æ˜¯åœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹ä¹‹åè¢«è°ƒç”¨ã€‚ä¸‹é¢çš„ä»£ç æ„å‘³ç€å½“æˆ‘ä»¬è°ƒç”¨â€œtoolsâ€èŠ‚ç‚¹æ—¶ï¼Œâ€œmodelâ€èŠ‚ç‚¹å°†å§‹ç»ˆåœ¨å…¶ä¹‹åè¢«è°ƒç”¨ã€‚

```
graph.add_edge("tools", "model")
```

**3 - æ¡ä»¶è¾¹ :** è¿™äº›æ˜¯ LLM ç”¨äºç¡®å®šé¦–å…ˆè®¿é—®å“ªä¸ªèŠ‚ç‚¹çš„è¾¹ã€‚æ‚¨ä¸ä¼šä¸¥æ ¼æŒ‡å®šå»å“ªé‡Œï¼›LLM é€šè¿‡æ£€æŸ¥çŠ¶æ€å’Œç”¨æˆ·è¾“å…¥æ¥å†³å®šç›®çš„åœ°ã€‚

æ¡ä»¶è¾¹æœ‰ä¸‰ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªæ˜¯å°†å†³å®šä¸‹ä¸€æ­¥åšä»€ä¹ˆçš„èŠ‚ç‚¹ã€‚ç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºç¡®å®šä¸‹ä¸€ä¸ªè°ƒç”¨å“ªä¸ªèŠ‚ç‚¹ã€‚ç¬¬ä¸‰ä¸ªæ˜¯ä¸€ä¸ªæ˜ å°„ï¼Œå…¶ä¸­é”®åº”è¯¥æ˜¯å‡½æ•°ï¼ˆ2ï¼‰å¯èƒ½è¿”å›çš„å€¼ï¼Œå€¼åº”è¯¥æ˜¯è¦å»çš„èŠ‚ç‚¹çš„åç§°ã€‚

```
graph.add_conditional_edge(
    "model",
    should_continue,
    {
        "end": END,
        "continue": "tools"
    }
)
```

## ç¼–è¯‘

åœ¨æˆ‘ä»¬å®šä¹‰å›¾å½¢åï¼Œå¯ä»¥å°†å…¶ç¼–è¯‘ä¸ºå¯è¿è¡Œçš„ç¨‹åºã€‚è¿™ä¸ªå¯è¿è¡Œçš„ç¨‹åºå…·æœ‰ä¸ LangChain å¯è¿è¡Œç¨‹åºç›¸åŒçš„æ–¹æ³•ï¼ˆ`.invoke`ã€`.stream`ã€`.astream_log` ç­‰ï¼‰

## å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ

å½“å•ä¸ªæ™ºèƒ½ä½“éœ€è¦æŒ‰é¡ºåºæ‰§è¡Œè¿‡å¤šå·¥å…·æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå¤±è´¥ã€‚å› æ­¤ï¼Œåœ¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å°†é—®é¢˜è¿›è¡Œåˆ’åˆ†ï¼Œå¹¶é€šè¿‡ä¸åŒçš„æ™ºèƒ½ä½“é€æ­¥è§£å†³æ¯ä¸ªæ­¥éª¤ï¼Œå°†ä»»åŠ¡è·¯ç”±åˆ°åˆé€‚çš„ä¸“å®¶ã€‚

> æ§åˆ¶æµç¨‹æœ‰ä¸‰ç§æ–¹å¼ï¼Œ[åä½œ](https://langchain-ai.github.io/langgraph/tutorials/multi_agent/multi-agent-collaboration/)ã€[ç›‘ç£](https://langchain-ai.github.io/langgraph/tutorials/multi_agent/agent_supervisor/)å’Œ[å±‚çº§å›¢é˜Ÿ](https://langchain-ai.github.io/langgraph/tutorials/multi_agent/hierarchical_agent_teams/)ã€‚æ‚¨å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œå¯¹äºæœ¬å¸–ï¼Œæˆ‘ä»¬å°†éµå¾ª**ç›‘ç£**æ¨¡å¼ã€‚

## ä»£ç†ç›‘ç£å‘˜

æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªä»£ç†ç»„ï¼Œæ¯ä¸ªä»£ç†å°†æ‹¥æœ‰ç‰¹å®šçš„å·¥å…·æ¥å®Œæˆä»»åŠ¡ã€‚ä»£ç†ç›‘ç£å‘˜å°†å¸®åŠ©æˆ‘ä»¬åˆ†é…ä»»åŠ¡ã€‚

![](https://cdn-images-1.readmedium.com/v2/resize:fit:800/0*ALMtoE-zGzNOlt-c.png)

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æœ‰2ä¸ªä»£ç†å’Œ1ä¸ªç›‘ç£å‘˜ã€‚ç¬¬ä¸€ä¸ªä»£ç†å°†ç”Ÿæˆéšæœºæ•°ï¼Œå¦ä¸€ä¸ªä»£ç†å°†ä¸ºè¿™äº›éšæœºæ•°ç»˜åˆ¶å›¾è¡¨ã€‚æ­£å¦‚æˆ‘ä»¬æ‰€æœŸæœ›çš„ï¼Œç›‘ç£å‘˜å°†åˆ†é…ä»»åŠ¡ï¼Œå½“éšæœºæ•°ç”Ÿæˆä»£ç†å®Œæˆåï¼Œå®ƒå°†æŠŠè½®å­äº¤ç»™å¦ä¸€ä¸ªä»£ç†ã€‚

è®©æˆ‘ä»¬å…ˆå®šä¹‰åŸºç¡€å†…å®¹ã€‚

```
from langchain_openai import ChatOpenAI
from typing import Annotated, List, Tuple, Union
from langchain.tools import BaseTool, StructuredTool, Tool
from langchain_experimental.tools import PythonREPLTool
from langchain_core.tools import tool
import random

llm = ChatOpenAI(model="gpt-3.5-turbo")

python_repl_tool = PythonREPLTool()

@tool("random_number", return_direct=False)
def random_number(input:str) -> str:
    """Returns a random number between 0-100. input the word 'random'"""
    return random.randint(0, 100)

tools = [random_number,python_repl_tool]
```

ç»§ç»­ç¼–å†™è¾…åŠ©å‡½æ•°

```
from langchain.agents import AgentExecutor, create_openai_tools_agent
from langchain_core.messages import BaseMessage, HumanMessage
from langchain_openai import ChatOpenAI

def create_agent(llm: ChatOpenAI, tools: list, system_prompt: str):
    prompt = ChatPromptTemplate.from_messages(
        [
            (
                "system",
                system_prompt,
            ),
            MessagesPlaceholder(variable_name="messages"),
            MessagesPlaceholder(variable_name="agent_scratchpad"),
        ]
    )
    agent = create_openai_tools_agent(llm, tools, prompt)
    executor = AgentExecutor(agent=agent, tools=tools)
    return executor

def agent_node(state, agent, name):
    result = agent.invoke(state)
    return {"messages": [HumanMessage(content=result["output"], name=name)]}

```

ç°åœ¨ï¼Œè®©æˆ‘ä»¬å¼€å§‹åˆ›å»ºæˆ‘ä»¬çš„å›¾ï¼Œå¹¶å°†è¿™ä¸¤ä¸ªä»£ç†ä½œä¸ºèŠ‚ç‚¹æ·»åŠ ï¼š

```
import operator
from typing import Annotated, Any, Dict, List, Optional, Sequence, TypedDict
import functools
from langchain_core.prompts import ChatPromptTemplate, MessagesPlaceholder
from langgraph.graph import StateGraph, END

random_agent = create_agent(llm, [random_number], "You get random numbers")
random_node = functools.partial(agent_node, agent=random_agent, name="Random_Number_Generator")

code_agent = create_agent(llm, [python_repl_tool], "You generate charts using matplotlib.")
code_node = functools.partial(agent_node, agent=code_agent, name="Coder")
```

æ˜¯æ—¶å€™åˆ›å»ºæˆ‘ä»¬çš„ç›‘ç£å‘˜äº†ï¼

```
from langchain.output_parsers.openai_functions import JsonOutputFunctionsParser
from langchain_core.prompts import ChatPromptTemplate, MessagesPlaceholder

members = ["Random_Number_Generator", "Coder"]
system_prompt = (
    "You are a supervisor tasked with managing a conversation between the"
    " following workers:  {members}. Given the following user request,"
    " respond with the worker to act next. Each worker will perform a"
    " task and respond with their results and status. When finished,"
    " respond with FINISH."
)

options = ["FINISH"] + members

function_def = {
    "name": "route",
    "description": "Select the next role.",
    "parameters": {
        "title": "routeSchema",
        "type": "object",
        "properties": {
            "next": {
                "title": "Next",
                "anyOf": [
                    {"enum": options},
                ],
            }
        },
        "required": ["next"],
    },
}
prompt = ChatPromptTemplate.from_messages(
    [
        ("system", system_prompt),
        MessagesPlaceholder(variable_name="messages"),
        (
            "system",
            "Given the conversation above, who should act next?"
            " Or should we FINISH? Select one of: {options}",
        ),
    ]
).partial(options=str(options), members=", ".join(members))

supervisor_chain = (
    prompt
    | llm.bind_functions(functions=[function_def], function_call="route")
    | JsonOutputFunctionsParser()
)
```

è®©æˆ‘ä»¬åˆ›å»ºæˆ‘ä»¬çš„å›¾ï¼( _è¯·é˜…è¯»æ³¨é‡Š_ )

é¦–å…ˆæˆ‘ä»¬å®šä¹‰çŠ¶æ€å¹¶æ·»åŠ æˆ‘ä»¬çš„ä»£ç†èŠ‚ç‚¹ï¼Œä»¥åŠç›‘ç£å‘˜èŠ‚ç‚¹ã€‚

```

class AgentState(TypedDict):
    messages: Annotated[Sequence[BaseMessage], operator.add]

    next: str

workflow = StateGraph(AgentState)

workflow.add_node("Random_Number_Generator", random_node)
workflow.add_node("Coder", code_node)
workflow.add_node("Supervisor", supervisor_chain)

workflow.add_edge("Random_Number_Generator", "supervisor")
workflow.add_edge("Coder", "supervisor")

workflow.add_conditional_edges(
                    "supervisor",
                    lambda x: x["next"],
                    {
                       "Random_Number_Generator": "Random_Number_Generator",
                       "Coder": "Coder",
                       "FINISH": END
                    })

workflow.set_entry_point("supervisor")

graph = workflow.compile()
```

è®©æˆ‘ä»¬è¯•è¯•ï¼Œä½ å¯ä»¥æµå¼ä¼ è¾“æˆ–ç›´æ¥è°ƒç”¨å›¾ã€‚

```
for s in graph.stream(
    {
        "messages": [
            HumanMessage(content="Get 10 random numbers and generate a histogram")
        ]
    }, config={"recursion_limit": 20}
):
    if "__end__" not in s:
        print(s)
        print("----")
```

![](https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*irNS8wtPRcW55fxKdYoDqQ.png)è¾“å‡º

ä»è¾“å‡ºä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä»å£°æ˜çš„ç›‘ç£å‘˜å¼€å§‹ã€‚ç›‘ç£å‘˜å°†æˆ‘ä»¬å¼•å¯¼åˆ°éšæœºæ•°ç”Ÿæˆå™¨ã€‚åœ¨éšæœºæ•°ç”Ÿæˆå™¨å®Œæˆä»»åŠ¡åï¼Œå®ƒè¿”å›åˆ°ç›‘ç£å‘˜ï¼Œå› ä¸ºæˆ‘ä»¬æ·»åŠ äº†ä¸€æ¡è¾¹ã€‚ç„¶åç›‘ç£å‘˜å¼•å¯¼åˆ°ç¼–ç å™¨ï¼Œç¼–ç å™¨å®Œæˆåè¿”å›åˆ°ç›‘ç£å‘˜ã€‚å½“ä»»åŠ¡å®Œæˆæ—¶ï¼Œç›‘ç£å‘˜å®Œæˆå¤„ç†ã€‚

ğŸ¥³

## LangSmith

LangSmith æ˜¯ä¸€ä¸ªç”¨äº LLM åº”ç”¨å¼€å‘ã€ç›‘æ§å’Œæµ‹è¯•çš„å¹³å°ã€‚å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘ä¸»è¦ä½¿ç”¨å®ƒè¿›è¡Œç›‘æ§ï¼Œå› æ­¤æˆ‘åªä¼šæåˆ°è¿™ä¸€æ–¹é¢ã€‚å¦‚æœæ‚¨å¯ç”¨ LangSmith è·Ÿè¸ªï¼Œæ‚¨å¯ä»¥ _debug_ æ‚¨çš„ LLMã€‚

æœ‰å…³æ–‡æ¡£ï¼Œè¯· [ç‚¹å‡»è¿™é‡Œã€‚](https://docs.smith.langchain.com/old/user_guide#:~:text=LangSmith%20is%20a%20platform%20for,of%20the%20application%20development%20lifecycle.)

ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¸Šé¢è¿›è¡Œçš„è¿è¡Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*C0kx9GKknL9b73bPSGeSSA.png)

å¦‚æœæ‚¨æƒ³è¦æ›´å¤šç»†èŠ‚ï¼š

![](https://cdn-images-1.readmedium.com/v2/resize:fit:800/1*XJsuts6W6xPiUpKsgI9rHw.png)

å½“æ‚¨æœ‰è®¸å¤šå·¥å…·çš„ä»£ç†æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œä»–ä»¬åªæœ‰ä¸€ä¸ªå·¥å…·ï¼Œä½†å½“é—®é¢˜å˜å¾—æ›´åŠ å¤æ‚å¹¶ä¸”æ‚¨æƒ³ç†è§£å†…éƒ¨å‘ç”Ÿäº†ä»€ä¹ˆæ—¶ï¼ŒLangSmith å°†çœŸæ­£å¸®åŠ©æ‚¨è·Ÿè¸ªæ­¥éª¤ã€‚æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨è°ƒè¯•æ§åˆ¶å°æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†æœ‰äº†è¿™ä¸ªå·¥å…·ï¼Œä½•å¿…éº»çƒ¦å‘¢ï¼Ÿ

æ‚¨å¯ä»¥é€šè¿‡æ·»åŠ ç¯å¢ƒå˜é‡æ¥å¯ç”¨è·Ÿè¸ªï¼š

```
os.environ["LANGCHAIN_TRACING_V2"] = "true"
```

è¿›ä¸€æ­¥é“¾æ¥ï¼š

- [https://blog.langchain.dev/langgraph/](https://blog.langchain.dev/langgraph/)
- [https://langchain-ai.github.io/langgraph/](https://langchain-ai.github.io/langgraph/)

å¸Œæœ›æ‚¨å–œæ¬¢ï¼ä¸‹æ¬¡è§ :)
